# AudiobookServiceBack
# ENG
AudiobookServiceBack is the backend of the audiobook management application. It is a Rest Api that responds to requests from the frontend. It's my portfolio project, which includes a lot of examples of using the Symfony framework, which I want to develop and specialize in. All files are saved on the server in the specified path (it has over-size protection on disk). Authentication is possible through a generated token, which must be added in the header for almost every request. Queries are sent as json, the application serializes them to objects accordingly and works on classes, not pure json. Errors are subject to logging with the monolog package and if any occur, the appropriate response 500, 400, 401, 403 is returned. For the audiobook to work properly, it must be provided in the appropriate zip format (mp3 files and cover jpg or png). When an error occurs, the audiobook can be deleted from the disk, and before activation is not visible to users. This also applies to the entire category and the audiobooks plugged into it. As an additional security measure, in addition to the Uuid itself for access to data sent from the api (audiobook details), a corresponding category key is required, created together with it. Translations have also been added, which, depending on the language or localization sent in the header, return a message to the user in the appropriate language (currently Polish and English). Tests have also been added to check and catch errors that are returned respectively. With the addition of the make package, you can execute shell commands that have been prepared to set up the server faster and add basic data. They mostly execute prepared symfony commands and can be found in the Makefile. Of course, an smpt server has also been added, which sends emails appropriate to the situation, which are also translated. Also included are listeners and tools that encapsulate minor functionalities that are repetitive or need to be encapsulated in one place. Api Swagger documentation is, of course, still implemented. Staged using OVH hosting on an Ubuntu system and using nginx, phpfpm, PHP 8.1 and Symfony 5. 

# Description
## Admin
The administrator has the ability to add new categories and assign audiobooks to them, while the audiobooks are added in the appropriate zip file format, which consists of mp3 files and cover jpg or png, and then he can manage them (listening, downloading information and editing it, resubmitting, deleting and adding categories and removing the audiobook from the category and the system). Managing users, he can change them at least: role, phone, password and activate them. An additional option for the user is a request for account deletion, which is also handled by the administrator. The last functionality is to add notifications, such as generating a weekly list of suggested, adding a new audiobook or category. A system for banning users and detecting disorderly activities is under development.

## User
At the beginning, the user gets a list of all audiobooks by category and a list of suggested ones (determined by liked categories). After listening to enough audiobooks, a list of suggested ones based on them will appear. After downloading the details of the audiobook, it has the option of listening with all the facilities like comments and liking them, rating the audiobook after listening to a minimum of half and adding/removing from my list. Of course, my list is a quick access list of favorite audiobooks. He can also manage his account in a limited but sufficient way, he can, for example: change his password and email, information such as name or phone, and send a request to delete his account. In addition, he receives system notifications. Additional pages such as About Us, Privacy Policy and links to this documentation and the rest Api he uses have been added.
</br>
</br>
</br>
</br>
# PL
AudiobookServiceBack to backend aplikacji do zarządzania audiobookami. Jest to Rest Api, które odpowiada na zapytania z frontendu. To mój projekt portfolio, który zawiera dużo przykładów wykorzystania frameworka Symfony, w którym chcę się rozwijać i specjalizować. Wszystkie pliki zapisywane są na serwerze w podanej ścieżce (ma zabezpieczenie przekroczenia rozmiaru na dysku). Autentykacja możliwa jest poprzez wygenerowany token, który należy dodać w header przy prawie każdym zapytaniu. Zapytania przesyłane są w postaci json, aplikacja je odpowiednio serializuje do obiektów i działa na klasach, nie na czystym jsonie. Błędy podlegają rejestrowaniu za pomocą pakietu monolog oraz w razie wystąpienia jakiegokolwiek, zwracany jest odpowiedni response 500, 400, 401, 403. Do odpowiedniego działania audiobooka musi on zostać podany w odpowiednim formacie zip (plików mp3 oraz cover jpg lub png). Gdy pojawi błąd, audiobook może on zostać usunięty z dysku, a przed aktywacją nie jest widoczny dla użytkowników. Dotyczy to również całej kategorii oraz podpiętych do niej audiobooków. Dodatkowym zabezpieczeniem, poza samym Uuid dla dostępu do danych przesyłanych z api (detale audiobooków), wymagany jest odpowiedni klucz kategori, tworzony razem z nią. Dodane zostały również tłumaczenia, które w zależności od przesłanego w headerze języka lub lokalizacji, zwracają użytkownikowi wiadomość w odpowiednim języku (aktualnie polski i angielski). Dodane zostały również testy, które sprawdzają i wyłapują zwracane odpowiednio błędy. Dzięki dodaniu pakietu make można wykonywać komendy shellowe, które zostały przygotowane do szybszego ustawienia serwera oraz dodania podstawowych danych. Wykonują one w większości przygotowane komendy symfony i można je znaleźć w pliku Makefile. Oczywiście dodany został też serwer smpt, który wysyła odpowiednie dla danej sytuacji maile, które również są tłumaczone. Zawarte zostały tam dodatkowo listenery oraz narzędzia które zamykają w sobie pomniejsze funkcjonalności powtarzalne lub wymagające zamknięcia w jednym miejscu. Zaimplementowana została oczywiście jeszcze dokumentacja Api Swagger. Wystawiony za pomocą hostingu OVH na systemie Ubuntu i za pomocą nginx, phpfpm, PHP 8.1 i Symfony 5. 
<br>

# Opis
## Admin
Administrator ma możliwość dodawania nowych kategorii i przypisywania do nich audiobooków, audiobooki natomiast dodaje w odpowiednim formacie pliku zip, który składa się z plików mp3 oraz cover jpg lub png, a następnie może nimi zarządzać (odsłuch, pobranie informacji oraz ich edycja, ponowne przesłanie, usunięcie i dodanie kategorii oraz usunięcie audiobooka z kategorii oraz systemu). Zarządzając użytkownikami może im zmieniać chociażby: rolę, telefon, hasło i aktywować ich. Dodatkową opcją dla użytkownika jest prośba o usunięcie konta, którą również rozpatruje administrator. Ostatnią funkcjonalności jest dodawanie powiadomień np. wygenerowanie co tygodniowej listy proponowanych, dodanie nowego audiobooka lub kategorii. Trwają prace nad systemem banowania użytkowników oraz wykrywania nieporządanych działań.

## User
Użytkownik na początku otrzymuje listę wszystkich audiobooków z podziałem na kategorie oraz listę proponowanych (ustalana na podstawie lubianych kategorii). Po odsłuchu odpowiedniej ilości audiobooków pojawi się lista proponowanych na ich podstawie. Po pobraniu detali audiobooka ma możliwość odsłuchu z wszystkimi udogodnieniami jak komentarze oraz ich likowanie, ocena audiobooka po przesłuchaniu minimum połowy i dodania/usunięcia z mojej listy. Oczywiście moja lista jest to lista szybkiego dostępu do ulubionych audiobooków. Może również zarządzać swoim kontem w ograniczonym ale wystarczającym stopniu, może np: zmienić hasło i email, informacje takie jak imię czy telefon oraz wysłać prośbę o usunięcie konta. Dodatkowo otrzymuje powiadomienia systemowe. Zostały dodane dodatkowo takiego strony jak O nas, polityka prywatności oraz odnośniki do tej dokumentacji oraz rest Api z którego korzysta.
